#!/usr/bin/env node

var program = require("commander"),
    os = require("os"),
    _ = require("../utils");

program
  .version("1.0.0-a")
  .usage("[options] dir")
  .option("-v, --verbose", "Display verbose information about actions")
  .parse(process.argv);

var eol = os.EOL;

// package.json
var package = [
  '{',
  '}'
].join(eol);

// scripts/app.js
var app = [
  '/**',
  ' * Module dependencies.',
  ' */',
  '',
  'var express = require("express"),',
  '    http = require("http"),',
  '    path = require("path");',
  '',
  'var app;',
  '',
  'module.exports = app = express();',
  '',
  '// all environments',
  'app.set("port", process.env.PORT || 3000);',
  'app.set("views", __dirname + "/views");',
  'app.set("view engine", "hjs");',
  'app.use(express.favicon());',
  'app.use(express.logger("dev"));',
  'if ("production" === app.get("env")) {',
  '  app.use(express.compress());',
  '}',
  'app.use(express.session({secret: "SESSION SECRET"});',
  'app.use(express.bodyParser());',
  'app.use(express.methodOverride());',
  'app.use(app.router);',
  'app.use(express.static(path.join(__dirname, "public")));',
  '',
  '// development only',
  'if ("development" == app.get("env")) {',
  '  app.use(express.errorHandler());',
  '}',
  '',
  'http.createServer(app).listen(app.get("port"), function(){',
  '  console.log("Express server listening on port " + app.get("port"));',
  '});'
].join(eol);

var structure = {
  "package.json": package,
  "index.js": "",
  "app": {
    "controllers": {},
    "models": {},
    "views": {}
  },
  "config": {
    "routes.js": "",
    "database.json": ""
  },
  "public": {
    "images": {},
    "javascripts": {},
    "stylesheets": {}
  },
  "scripts": {
    "app.js": app
  }
}

console.log(program.args);